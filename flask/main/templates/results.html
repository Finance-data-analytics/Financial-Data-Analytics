{% extends 'base.html' %}
{% block title %}
    Logs Querry
{% endblock %}

{% block content %}
    <div class="form-inline my-2 my-lg-0 d-flex align-items-center">
        <form class="form-inline my-2 my-lg-0">
            <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search" id="searchBar">
        </form>
        <form action="{{ url_for('main.clean_results') }}" method="POST">
            <button type="submit" class="btn btn-danger">Clean Results Folder</button>
        </form>
    </div>


    <table class="table table-hover table-dark" id="queryTable">
        <thead>
            <tr>
                <th scope="col">Name</th>
                <th scope="col">Is Empty</th>
                <th scope="col">Options</th>
            </tr>
        </thead>
        <tbody>
            {% for folder in folders %}
                <tr>
                    <td>{{ folder.name }}</td>
                    <td>{{ folder.is_empty }}</td>
                    <td>
                        <a href="{{ url_for('main.results_detail', folder=folder.name) }}" class="btn btn-outline btn-info">Info</a>
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}

{% block JS %}
    document.getElementById('searchBar').addEventListener('keyup', function() {
    var input, filter, table, tr, td, i, txtValue;
    input = document.getElementById('searchBar');
    filter = input.value.toUpperCase();
    table = document.getElementById('queryTable');
    tr = table.getElementsByTagName('tr');

    for (i = 0; i < tr.length; i++) {
        td = tr[i].getElementsByTagName('td')[0];  // Change this to the column index you want to filter on
        if (td) {
            txtValue = td.textContent || td.innerText;
            if (txtValue.toUpperCase().indexOf(filter) > -1) {
                tr[i].style.display = '';
            } else {
                tr[i].style.display = 'none';
            }
        }
    }
});
{% endblock %}